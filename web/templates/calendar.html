{{define "content"}}
<div class="row">
    <div class="col-12">
        <div class="d-flex justify-content-between align-items-center mb-4">
            <h2>Class Calendar</h2>
            <div class="d-flex gap-2">
                <a href="/classes" class="btn btn-outline-primary">List View</a>
                <a href="/dashboard" class="btn btn-outline-secondary">Dashboard</a>
            </div>
        </div>
    </div>
</div>

<div class="row">
    <div class="col-12">
        <div class="calendar-container">
            <!-- Calendar Header -->
            <div class="calendar-header">
                <a href="/calendar?year={{.PrevMonth.Year}}&month={{.PrevMonth.Month}}" class="calendar-nav-btn">‹ Previous</a>
                <h3 class="calendar-title">{{.CurrentMonth.Format "January 2006"}}</h3>
                <a href="/calendar?year={{.NextMonth.Year}}&month={{.NextMonth.Month}}" class="calendar-nav-btn">Next ›</a>
            </div>
            
            <!-- Calendar Grid -->
            <div class="calendar-grid">
                <!-- Day Headers -->
                <div class="calendar-day-header">Mon</div>
                <div class="calendar-day-header">Tue</div>
                <div class="calendar-day-header">Wed</div>
                <div class="calendar-day-header">Thu</div>
                <div class="calendar-day-header">Fri</div>
                <div class="calendar-day-header">Sat</div>
                <div class="calendar-day-header">Sun</div>
                
                <!-- Calendar Days -->
                {{range .CalendarData.Days}}
                <div class="calendar-day {{if .IsOtherMonth}}other-month{{end}} {{if .IsToday}}today{{end}}"
                     data-date="{{.Date.Format "2006-01-02"}}"
                     {{if .Classes}}
                     hx-get="/api/calendar/day/{{.Date.Format "2006-01-02"}}"
                     hx-target="#day-modal-content"
                     hx-trigger="click"
                     data-bs-toggle="modal"
                     data-bs-target="#dayModal"
                     {{end}}>
                    <div class="calendar-day-number">{{.Day}}</div>
                    {{range .Classes}}
                    <div class="calendar-event" title="{{.Name}} - {{.StartTime.Format "15:04"}}">
                        {{.Name}}
                    </div>
                    {{end}}
                </div>
                {{end}}
            </div>
        </div>
    </div>
</div>

<!-- Day Details Modal -->
<div class="modal fade" id="dayModal" tabindex="-1" aria-labelledby="dayModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-lg">
        <div class="modal-content class-modal">
            <div class="modal-header">
                <h5 class="modal-title" id="dayModalLabel">Classes</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body" id="day-modal-content">
                <!-- HTMX will load day details here -->
            </div>
        </div>
    </div>
</div>

<!-- Legend -->
<div class="row mt-4">
    <div class="col-12">
        <div class="card">
            <div class="card-header">
                <h5 class="card-title mb-0">Legend</h5>
            </div>
            <div class="card-body">
                <div class="d-flex flex-wrap gap-4">
                    <div class="d-flex align-items-center">
                        <div class="calendar-event me-2" style="width: 20px; height: 20px;"></div>
                        <span>Yoga Class</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <div class="calendar-day today me-2" style="width: 20px; height: 20px; border-radius: 3px;"></div>
                        <span>Today</span>
                    </div>
                    <div class="d-flex align-items-center">
                        <div class="calendar-day other-month me-2" style="width: 20px; height: 20px; border-radius: 3px;"></div>
                        <span>Other Month</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
// Add click handlers for calendar navigation
document.addEventListener('DOMContentLoaded', function() {
    // Calendar day click animation
    document.querySelectorAll('.calendar-day').forEach(day => {
        day.addEventListener('mouseenter', function() {
            if (this.classList.contains('other-month')) return;
            this.style.transform = 'scale(1.02)';
        });
        
        day.addEventListener('mouseleave', function() {
            this.style.transform = 'scale(1)';
        });
    });
});
</script>
{{end}}